web server01 (172.21.64.56)
1- install nginx
2-create the file named portal.conf and admin.conf copy secured config file into these
config file.
goto /etc/nginx/conf.d/portal.conf
     /etc/nginx/conf.d/admin.conf
3-open the portal.conf and stuff with configuration data like this.
upstream portal {
        hash $cookie_sessionID;
        server 172.21.64.51:80;
#        server 172.21.64.52:80;
    }
upstream portalapi {
        hash $cookie_sessionID;
       server 172.21.64.51:8085;
#       server 172.21.64.52:8085;
    }
upstream vts {
        hash $cookie_sessionID;
       server 172.21.64.51:8082;
#       server 172.21.64.52:8085;
    }

map $sent_http_content_type $expires {
    default                    off;
    text/html                  epoch;
    text/css                   max;
    application/javascript     max;
    ~image/                    max;
}
include /etc/nginx/blockuseragents.rules;
server {
    listen 80;
    server_name varanasismartcity.gov.in;
#   return 301 https://$host$request_uri/;

keepalive_timeout   70;

gzip on;
    gzip_comp_level    5;
    gzip_min_length    256;
    gzip_proxied       any;
    gzip_vary          on;

    gzip_types
    application/atom+xml
    application/javascript
    application/json
    application/ld+json
    application/manifest+json
    application/rss+xml
    application/vnd.geo+json
    application/vnd.ms-fontobject
    application/x-font-ttf
    application/x-web-app-manifest+json
    application/xhtml+xml
    application/xml
    font/opentype
    image/bmp
    image/svg+xml
    image/x-icon
    text/cache-manifest
    text/css
    text/plain
    text/vcard
    text/vnd.rim.location.xloc
    text/vtt
    text/x-component
    text/x-cross-domain-policy;

if ($request_method !~ ^(GET|HEAD|POST)$ )
        {
        return 405;
        }

   if ($blockedagent){
       return 403;
    }
    server_tokens off;
    add_header X-XSS-Protection "1; mode=block";
    add_header X-Frame-Options "SAMEORIGIN";
    add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
    add_header X-Content-Type-Options nosniff;



location / {
       proxy_pass http://portal;
    }

location /api {
       proxy_pass http://portalapi;
    }

location /vts {
       proxy_pass http://vts;
    }

expires $expires;
}


4-open the second conf file named admin.conf

upstream portaladmin {
        hash $cookie_sessionID;
        server 172.21.64.51:8080;
#        server 172.21.64.52:8080;
    }
map $sent_http_content_type $expires {
    default                    off;
    text/html                  epoch;
    text/css                   max;
    application/javascript     max;
    ~image/                    max;
}
include /etc/nginx/blockuseragents.rules;
server {
    listen 80;
    server_name serviceadmin.varanasismartcity.gov.in;
#   return 301 https://$host$request_uri/;

keepalive_timeout   70;

gzip on;
    gzip_comp_level    5;
    gzip_min_length    256;
    gzip_proxied       any;
    gzip_vary          on;

    gzip_types
    application/atom+xml
    application/javascript
    application/json
    application/ld+json
    application/manifest+json
    application/rss+xml
    application/vnd.geo+json
    application/vnd.ms-fontobject
    application/x-font-ttf
    application/x-web-app-manifest+json
    application/xhtml+xml
    application/xml
    font/opentype
    image/bmp
    image/svg+xml
    image/x-icon
    text/cache-manifest
    text/css
    text/plain
    text/vcard
    text/vnd.rim.location.xloc
    text/vtt
    text/x-component
    text/x-cross-domain-policy;

if ($request_method !~ ^(GET|HEAD|POST)$ )
        {
        return 405;
        }

   if ($blockedagent){
       return 403;
    }
    server_tokens off;
    add_header X-XSS-Protection "1; mode=block";
    add_header X-Frame-Options "SAMEORIGIN";
    add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";
    add_header X-Content-Type-Options nosniff;



location / {
       proxy_pass http://portaladmin;
    }

expires $expires;
}

5- goto /etc/nginx/blockuseragents.rules 
6-